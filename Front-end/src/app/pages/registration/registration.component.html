<div class="registration-container" [@fadeInUp]>
  <!-- Modern Background -->
  <div class="modern-bg">
    <!-- Subtle Background Pattern -->
    <div class="bg-pattern"></div>
    
    <!-- Background Image Overlay -->
    <div class="bg-image-overlay"></div>
  </div>

  <div class="glass-card" [@cardEntrance]>
    <div class="card-header" [@headerEntrance]>
      <h1 class="title">
        <span class="title-word">Join</span>
        <span class="title-word">UK</span>
        <span class="title-word">Sports</span>
        <span class="title-word">Club</span>
      </h1>
      <p class="subtitle">{{ APP_MESSAGES.UI.REGISTRATION_SUBTITLE }}</p>
    </div>

    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form" [@staggerAnimation]>
      <!-- Full Name Field -->
      <div class="form-group">
        <div class="input-wrapper">
          <input
            type="text"
            id="fullName"
            formControlName="fullName"
            class="form-input"
            [class.invalid]="isFieldInvalid('fullName')"
            [class.focused]="fullName?.value"
            placeholder=" "
            autocomplete="name"
          />
          <label for="fullName" class="form-label">{{ APP_MESSAGES.FORM_LABELS.FULL_NAME }}</label>
          <div class="input-glow"></div>
        </div>
        <div class="error-message" *ngIf="isFieldInvalid('fullName')" [@slideIn]>
          {{ getErrorMessage('fullName') }}
        </div>
      </div>

      <!-- Email Field -->
      <div class="form-group">
        <div class="input-wrapper">
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-input"
            [class.invalid]="isFieldInvalid('email')"
            [class.focused]="email?.value"
            placeholder=" "
            autocomplete="email"
          />
          <label for="email" class="form-label">{{ APP_MESSAGES.FORM_LABELS.EMAIL }}</label>
          <div class="input-glow"></div>
        </div>
        <div class="error-message" *ngIf="isFieldInvalid('email')" [@slideIn]>
          {{ getErrorMessage('email') }}
        </div>
      </div>

      <!-- Password Field -->
      <div class="form-group">
        <div class="input-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            formControlName="password"
            class="form-input"
            [class.invalid]="isFieldInvalid('password')"
            [class.focused]="password?.value"
            placeholder=" "
            autocomplete="new-password"
          />
          <label for="password" class="form-label">{{ APP_MESSAGES.FORM_LABELS.PASSWORD }}</label>
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility()"
            tabindex="-1"
          >
            <span *ngIf="!showPassword">üëÅÔ∏è</span>
            <span *ngIf="showPassword">üôà</span>
          </button>
          <div class="input-glow"></div>
        </div>
        <div class="error-message" *ngIf="isFieldInvalid('password')" [@slideIn]>
          {{ getErrorMessage('password') }}
        </div>
      </div>

      <!-- Confirm Password Field -->
      <div class="form-group">
        <div class="input-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="form-input"
            [class.invalid]="isFieldInvalid('confirmPassword') || registrationForm.hasError('passwordMismatch')"
            [class.focused]="confirmPassword?.value"
            placeholder=" "
            autocomplete="new-password"
          />
          <label for="confirmPassword" class="form-label">{{ APP_MESSAGES.FORM_LABELS.CONFIRM_PASSWORD }}</label>
          <button
            type="button"
            class="password-toggle"
            (click)="toggleConfirmPasswordVisibility()"
            tabindex="-1"
          >
            <span *ngIf="!showConfirmPassword">üëÅÔ∏è</span>
            <span *ngIf="showConfirmPassword">üôà</span>
          </button>
          <div class="input-glow"></div>
        </div>
        <div class="error-message" *ngIf="(isFieldInvalid('confirmPassword') || registrationForm.hasError('passwordMismatch')) && confirmPassword?.touched" [@slideIn]>
          {{ getErrorMessage('confirmPassword') }}
        </div>
      </div>

      <!-- Date of Birth Field -->
      <div class="form-group">
        <div class="input-wrapper">
          <input
            type="date"
            id="dob"
            formControlName="dob"
            class="form-input"
            [class.invalid]="isFieldInvalid('dob')"
            [class.focused]="dob?.value"
          />
          <label for="dob" class="form-label">{{ APP_MESSAGES.FORM_LABELS.DATE_OF_BIRTH }}</label>
          <div class="input-glow"></div>
        </div>
        <div class="error-message" *ngIf="isFieldInvalid('dob')" [@slideIn]>
          {{ getErrorMessage('dob') }}
        </div>
      </div>

      <!-- Gender Field -->
      <div class="form-group">
        <div class="input-wrapper">
          <select
            id="gender"
            formControlName="gender"
            class="form-input form-select"
            [class.invalid]="isFieldInvalid('gender')"
            [class.focused]="gender?.value"
          >
            <option value="" disabled>{{ APP_MESSAGES.UI.SELECT_GENDER }}</option>
            <option *ngFor="let option of genderOptions" [value]="option.value">
              {{ option.label }}
            </option>
          </select>
          <label for="gender" class="form-label">{{ APP_MESSAGES.FORM_LABELS.GENDER }}</label>
          <div class="input-glow"></div>
        </div>
        <div class="error-message" *ngIf="isFieldInvalid('gender')" [@slideIn]>
          {{ getErrorMessage('gender') }}
        </div>
      </div>

      <!-- Profile Picture Field -->
      <div class="form-group">
        <div class="file-upload-wrapper">
          <input
            type="file"
            id="profilePicture"
            accept="image/jpeg,image/jpg,image/png"
            (change)="onFileSelected($event)"
            class="file-input"
            [class.invalid]="profilePictureError"
          />
          <label for="profilePicture" class="file-label">
            <span class="file-label-text">{{ APP_MESSAGES.UI.PROFILE_PICTURE_OPTIONAL }}</span>
            <span class="file-label-hint">{{ APP_MESSAGES.UI.PROFILE_PICTURE_HINT }}</span>
          </label>
          <div class="file-preview" *ngIf="profilePicturePreview">
            <img [src]="profilePicturePreview" alt="Profile preview" class="preview-image" />
            <button type="button" class="remove-image" (click)="removeProfilePicture()" tabindex="-1">
              √ó
            </button>
          </div>
        </div>
        <div class="error-message" *ngIf="profilePictureError" [@slideIn]>
          {{ profilePictureError }}
        </div>
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        class="submit-button"
        [class.loading]="isSubmitting"
        [disabled]="isSubmitting"
      >
        <span *ngIf="!isSubmitting" class="button-text">{{ APP_MESSAGES.UI.SUBMIT_MEMBERSHIP }}</span>
        <span *ngIf="isSubmitting" class="button-loading">
          <span class="spinner"></span>
          {{ APP_MESSAGES.UI.SUBMITTING }}
        </span>
      </button>

      <!-- Success Message -->
      <div class="success-message" *ngIf="showSuccessMessage" [@slideIn]>
        ‚úì {{ APP_MESSAGES.SUCCESS.REGISTRATION_SUBMITTED }}
      </div>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage" [@slideIn]>
        ‚úó {{ errorMessage }}
      </div>
    </form>
  </div>
</div>

